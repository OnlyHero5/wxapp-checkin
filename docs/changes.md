# Changes Log

## 2026-02-03
- 新增 `src/` 下完整微信小程序结构与页面代码（签到、注册、记录、详情）。
- 增加通用样式与极简科技风 UI 视觉方案，包含成功动画与无网提示。
- 增加 API 封装、登录换取会话、数据加密占位实现与本地存储模块。
- 提供 `project.config.json` 便于直接在微信开发者工具打开运行。
- 调整签到页与记录页标题区域，移除英文标识与标题后文案。
- 调整注册绑定页标题区域，移除英文标识与辅助文案。
- 优化全局 UI 风格：背景渐变、卡片质感、按钮交互与列表按压反馈。
- 进一步增强页面层次感：页面背景光晕与卡片渐变质感。
- 使用 frontend-design 思路进行全面布局优化：极简标题、网格背景、结构化信息卡片与更克制的视觉层次。
- 重新切换至 Moonshot 风格的浅色理工审美：纯净底色、细线分隔、低对比层级与克制按钮配色。

思路说明：
- 前端通过 `auth.ensureSession` 统一获取 `session_token`，避免各页重复逻辑。
- API 层提供 mock 模式，确保无后端时也能直接运行和演示流程；上线时将 `src/utils/config.js` 的 `mock` 改为 `false` 并配置 `baseUrl`。
- 加密逻辑暂用 Base64 作为占位，后续可替换为后端指定的 AES/RSA 实现。

## 2026-02-04
- 切换至 `tdesign-miniprogram` 作为 UI 组件库，移除 AntD 依赖。
- 签到、记录、详情、注册页全面替换为 TDesign 组件（button/tag/cell/input）。
- 新增“个人中心”页与 TabBar 入口，完善页面结构与导航。
- 更新 `app.json` 页面列表与底部导航配置。
- 将 `package.json`/`package-lock.json` 移入 `src/`，以符合 `miniprogramRoot` 的 NPM 构建要求。
- 主题优化为“石墨雾”风格，降低黑白对比，卡片/按钮更柔和。
- 主按钮色调整为深蓝系，并居中呈现。
- 修复主按钮在部分页面未居中的问题（新增统一居中容器）。
- 更新 README：补充 TDesign、构建步骤与发布说明。
- 重新对齐发布标签：`v2026.02.04` 指向最新提交。
- 新增 docs/API_SPEC.md：后端接口说明（统一 code/message/data）。

## 2026-02-06
- 完成角色分流：
  - 普通用户：活动卡片浏览 + 个人信息 + 积分
  - 工作人员：活动卡片操作（签到/签退/详情）+ 个人信息
- 活动页统一卡片化，普通用户展示 `my_checked_in`，工作人员展示 `checkin_count`。
- 个人中心优化：
  - 普通用户显示社会分/讲座分（后端返回）
  - 普通用户隐藏“曾参加活动”卡片
- 新增活动详情页 `src/pages/activity-detail/*`
- API 文档升级到角色分流版本（见 `docs/API_SPEC.md`）
